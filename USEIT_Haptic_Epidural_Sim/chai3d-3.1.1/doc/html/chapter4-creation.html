<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Creating an Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Documentation</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('chapter4-creation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Creating an Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="section4-1"></a>
Microsoft Visual Studio</h1>
<p>In the following section we demonstrate how to create a project from scratch using <b>Microsoft Visual Studio</b>. If you are using a different framework, these instructions will give you some basic information on how to get started.</p>
<p>The following screenshots have been taken from <b>Microsoft Visual Studio 2013</b>. If you are using a different version of the SDK then the menu options may change slightly, but the key functionalities should remain the same.</p>
<h2><a class="anchor" id="subsection4-1-1"></a>
Getting Started</h2>
<p>In the following steps we setup the basic directory structure and files necessary to build an application using CHAI3D. Depending of which display or GUI library you may want to use, project templates are provided for <b>FreeGLUT</b>, <b>.NET</b>, and <b>Qt</b> and can be found in the <code><b>CHAI3D/templates</b></code> directory.</p>
<p>In this example we will show you how to create a project using <b>FreeGLUT</b>. For the other frameworks, the setup is almost identical except for the additional libraries and/or references that may be required. In these cases, we will let you take a closer look at the project templates referenced above.</p>
<p>To get started, we first create an empty directory called <code><b>application</b></code> in which we setup all the necessary files. This directory can be created anywhere on your harddrive.</p>
<p>We then create two sub-directories called <code><b>bin</b></code> and <code><b>external</b></code>. The <code><b>bin</b></code> directory will contain the executable file of the application with any resource files associated with it (e.g. media files, DLLs, etc..). The <code><b>external</b></code> directory will contain all external libraries used by your application, including a copy of the CHAI3D framework.</p>
<div class="image">
<img src="fig-vs-0.png" alt="fig-vs-0.png"/>
</div>
<p>In the newly created <code><b>external</b></code> directory, place a copy of CHAI3D. If your application requires other frameworks or libraries, you may place a copy of these files there too.</p>
<div class="image">
<img src="fig-vs-1.png" alt="fig-vs-1.png"/>
</div>
<p>In the <code><b>bin</b></code> directory, please create two sub-folders named <code><b>win-Win32</b></code> and <code><b>win-x64</b></code> in which you will copy the following DLL files availble from the <code><b>CHAI3D/bin/win-Win32</b></code> and <code><b>CHAI3D/bin/win-x64</b></code> directories. These DLL files are necessary only if you plan to support different tracking or haptic devices. If you are developing an application for the <b>Force Dimension</b> haptic devices, none of these files are needed. If your application contains additional resource files such as images, videos, or sounds, we suggest that you store them in a sub-directory that we called <code><b>resources</b></code> in this example.</p>
<div class="image">
<img src="fig-vs-2.png" alt="fig-vs-2.png"/>
</div>
<div class="image">
<img src="fig-vs-44.png" alt="fig-vs-44.png"/>
</div>
<div class="image">
<img src="fig-vs-45.png" alt="fig-vs-45.png"/>
</div>
<h2><a class="anchor" id="subsection4-1-2"></a>
Creating Project Files</h2>
<p>Launch <b>Microsoft Visual Studio</b> and create a new project file by selecting menu <b>FILE &gt; New &gt; Project</b>.</p>
<div class="image">
<img src="fig-vs-3.png" alt="fig-vs-3.png"/>
</div>
<p>Select <b> Empty Project </b> and click on button <b> Browse... </b>to locate the newly created directory <code><b>application</b></code>.</p>
<div class="image">
<img src="fig-vs-4.png" alt="fig-vs-4.png"/>
</div>
<p>Define a name for your project. In this example we name the project: <b>myProject</b>.</p>
<div class="image">
<img src="fig-vs-5.png" alt="fig-vs-5.png"/>
</div>
<p>The project and solution files are now created and can be found in directory <code><b>application/myProject</b></code></p>
<div class="image">
<img src="fig-vs-6.png" alt="fig-vs-6.png"/>
</div>
<p>Select the configuration manager from menu <b>BUILD &gt; Configuration Manager...</b>.</p>
<div class="image">
<img src="fig-vs-7.png" alt="fig-vs-7.png"/>
</div>
<p>By default, settings are only created for 32-bit compilation (<b>Win32</b>). We now create a new configuration for 64-bit platforms (<b>x64</b>). It is important to perform this step before adding additional project files to your Solution.</p>
<div class="image">
<img src="fig-vs-8.png" alt="fig-vs-8.png"/>
</div>
<p>Select <b>x64</b> as the new platform and click button <b>OK</b></p>
<div class="image">
<img src="fig-vs-9.png" alt="fig-vs-9.png"/>
</div>
<p>We will now add the CHAI3D project to the application. Select menu <b>FILE &gt; Add &gt; Existing Project</b>.</p>
<div class="image">
<img src="fig-vs-10.png" alt="fig-vs-10.png"/>
</div>
<p>Select the project file corresponding to your version of <b>Microsoft Visual Studio</b>.</p>
<p>As we are using Visual Studio 2013 in our example, we select project file <code><b>CHAI3D-VS2013.vcxproj</b></code></p>
<div class="image">
<img src="fig-vs-11.png" alt="fig-vs-11.png"/>
</div>
<p>In this example we also add the <b>FreeGLUT</b> graphic display framework.</p>
<p>As performed in the previous step, select menu <b>FILE &gt; Add &gt; Existing Project</b>.</p>
<div class="image">
<img src="fig-vs-12.png" alt="fig-vs-12.png"/>
</div>
<p>In the <b>Solution Explorer</b> you should now see all three projects, namely <b>CHAI3D</b>, <b>freeglut</b>, and <b>myProject</b>.</p>
<div class="image">
<img src="fig-vs-13.png" alt="fig-vs-13.png"/>
</div>
<p>Using the mouse <b>right button</b>, click on <b>myProject</b> and select option <b>Set as StartUp Project</b>.</p>
<p>This will tell Visual Studio which application to run once the Solution has been compiled.</p>
<div class="image">
<img src="fig-vs-14.png" alt="fig-vs-14.png"/>
</div>
<p>We now define the project dependencies of our project. In this example, the application requires both <b>CHAI3D</b> and <b>freeglut</b>. Select menu <b>PROJECT &gt; Project Dependencies</b>.</p>
<div class="image">
<img src="fig-vs-15.png" alt="fig-vs-15.png"/>
</div>
<p>Using the mouse, check both <b>CHAI3D</b> and <b>freeglut</b>.</p>
<div class="image">
<img src="fig-vs-16.png" alt="fig-vs-16.png"/>
</div>
<p>Since the project is still empty, we create an empty <b>main.cpp</b> file in which we will write our program.</p>
<div class="image">
<img src="fig-vs-17.png" alt="fig-vs-17.png"/>
</div>
<p>Select <b>C++ File (.cpp)</b> and give it the name <b>main.cpp</b>. Click button <b>Add</b> to generate the new file.</p>
<div class="image">
<img src="fig-vs-18.png" alt="fig-vs-18.png"/>
</div>
<p>The new empty file has now been created and is ready to receive your source code.</p>
<div class="image">
<img src="fig-vs-19.png" alt="fig-vs-19.png"/>
</div>
<p>Since you will probably want to compile and run this application, we suggest that you copy the content of one of the examples provided with CHAI3D. For this demonstration we copied the code found in example <code><b>CHAI3D/examples/GLUT/13-primitives</b></code>. If you wish to use another example instead, make sure to also copy any necessary resource files into the <code><b>application/bin</b></code> directory.</p>
<div class="image">
<img src="fig-vs-43.png" alt="fig-vs-43.png"/>
</div>
<h2><a class="anchor" id="subsection4-1-3"></a>
Setting Project Properties</h2>
<p>In this section we setup the different project properties of our application.</p>
<p>Using the mouse <b>right button</b>, click on <b>myProject</b> and select option <b>Properties</b>.</p>
<div class="image">
<img src="fig-vs-20.png" alt="fig-vs-20.png"/>
</div>
<p>The following Property Pages Window will show up.</p>
<div class="image">
<img src="fig-vs-21.png" alt="fig-vs-21.png"/>
</div>
<p>Before modifying any of the properties, we assign the Configuration to <b>All Configurations</b> and the Platform to <b>All Platforms</b>. This will allow us to assign properties to all of the four possible modes simultaneously, respectively:</p><ul>
<li>Win32 / Debug</li>
<li>Win32 / Release</li>
<li>x64 / Debug</li>
<li>x64 / release</li>
</ul>
<div class="image">
<img src="fig-vs-22.png" alt="fig-vs-22.png"/>
</div>
 <div class="image">
<img src="fig-vs-23.png" alt="fig-vs-23.png"/>
</div>
<p>In <b>Configuration Properties / General</b>, define the <b>Output Directory</b> to <code><b>../../bin/win-$(platform)\</b></code></p>
<div class="image">
<img src="fig-vs-24.png" alt="fig-vs-24.png"/>
</div>
<p>In <b>Configuration Properties / C/C++ / General</b>, edit the <b>Additional Include Directories</b></p>
<div class="image">
<img src="fig-vs-25.png" alt="fig-vs-25.png"/>
</div>
<p>Add the following directories:</p><ul>
<li><code><b>../../external/CHAI3D/src</b></code></li>
<li><code><b>../../external/CHAI3D/external/Eigen</b></code></li>
<li><code><b>../../external/CHAI3D/external/glew/include</b></code></li>
<li><code><b>../../external/CHAI3D/extras/freeglut/include</b></code></li>
</ul>
<p>Please note that the last directory is only used if you are using <b>FreeGLUT</b> as the display library. If you are using another framework such as <b>.NET</b> or <b>Qt</b>, then this line can be ommited and replaced by other references.</p>
<div class="image">
<img src="fig-vs-26.png" alt="fig-vs-26.png"/>
</div>
<p>In <b>Configuration Properties / C/C++ / Language</b>, select <b>Yes (/GR)</b> for option <b>Enable Run-Time Type Information</b>.</p>
<div class="image">
<img src="fig-vs-27.png" alt="fig-vs-27.png"/>
</div>
<p>In <b>Configuration Properties / Linker / General</b>, edit <b>Additional Library Directories</b></p>
<div class="image">
<img src="fig-vs-28.png" alt="fig-vs-28.png"/>
</div>
<p>Add the following directories:</p><ul>
<li><code><b>../../external/CHAI3D/lib/$(Configuration)/$(Platform)</b></code></li>
<li><code><b>../../external/CHAI3D/extras/freeglut/lib/$(Configuration)/$(Platform)</b></code></li>
</ul>
<div class="image">
<img src="fig-vs-29.png" alt="fig-vs-29.png"/>
</div>
<p>In <b>Configuration Properties / Linker / Input</b>, edit <b>Additional Dependencies</b></p>
<div class="image">
<img src="fig-vs-30.png" alt="fig-vs-30.png"/>
</div>
<p>Add the following library files:</p><ul>
<li><code><b>chai3d.lib</b></code></li>
<li><code><b>freeglut.lib</b></code></li>
</ul>
<div class="image">
<img src="fig-vs-31.png" alt="fig-vs-31.png"/>
</div>
<p>In <b>Configuration Properties / Linker / System</b>, select <b>Console (/SUBSYSTEM:CONSOLE)</b> for option <b>SubSystem</b>.</p>
<div class="image">
<img src="fig-vs-42.png" alt="fig-vs-42.png"/>
</div>
<p>As for the final settings we now define two different <b>preprocessor directives</b> for the <b>Win32</b> and <b>x64</b> platforms.</p>
<p>Select the <b>Win32</b> platform.</p>
<div class="image">
<img src="fig-vs-36.png" alt="fig-vs-36.png"/>
</div>
<p>In <b>Configuration Properties / C/C++ / Language</b>, edit <b>Processor Definitions</b>.</p>
<div class="image">
<img src="fig-vs-37.png" alt="fig-vs-37.png"/>
</div>
<p>Assign the following directive: <code><b>WIN32</b></code>.</p>
<div class="image">
<img src="fig-vs-38.png" alt="fig-vs-38.png"/>
</div>
<p>Select the <b>x64</b> platform.</p>
<div class="image">
<img src="fig-vs-39.png" alt="fig-vs-39.png"/>
</div>
<p>In <b>Configuration Properties / C/C++ / Language</b>, edit <b>Processor Definitions</b>.</p>
<div class="image">
<img src="fig-vs-40.png" alt="fig-vs-40.png"/>
</div>
<p>Assign the following directive: <code><b>WIN64</b></code>.</p>
<div class="image">
<img src="fig-vs-41.png" alt="fig-vs-41.png"/>
</div>
<h2><a class="anchor" id="subsection4-1-4"></a>
Compiling and Running</h2>
<p>To insure maximum performance and stability of your haptic device, it is <b>very important</b> to always compile and run your application in <b>Release</b> mode whenever you are not debugging your code. If you need to debug your code, consider disabling or reducing all haptic forces to avoid having your device go unstable.</p>
<div class="image">
<img src="fig-vs-32.png" alt="fig-vs-32.png"/>
</div>
<p>To build the entire solution, select menu <b>BUILD &gt; Build Solution</b></p>
<div class="image">
<img src="fig-vs-33.png" alt="fig-vs-33.png"/>
</div>
<p>Once the application has been successfully compiled, you may run the application.</p>
<div class="image">
<img src="fig-vs-34.png" alt="fig-vs-34.png"/>
</div>
<p>Here is a final screenshot that illustrates the application running.</p>
<div class="image">
<img src="fig-vs-35.png" alt="fig-vs-35.png"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
